---
title: Widget Methods
description: Methods available on widget objects in Novadesk
---

import CodeBlock from '@theme/CodeBlock';

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';



Novadesk enforces a **Strict Separation of Concerns** between the **Main script** (application logic) and **UI scripts**
(visual presentation).

:::note
- **Main Script**: Manages widget windows (creation, positioning, lifecycle). It **cannot** directly add UI elements.
- **UI Script**: Manages visual elements (text, images, interactions). It **cannot** directly change window-level
properties.
- **Communication**: Use the global [ipc](/api/widget-api/widget-methods/#inter-process-communication-ipc) object to communicate between these contexts.
:::

## UI Element Methods

:::note
The following methods are **only** accessible within the `win` object inside a UI script. They are **unavailable** in
the main application script.
:::

### **`addText(options)`**

Add a text element to the widget.Available only in UI scripts.  
---

###### **`options`**

* **Type**: `Object`
* **Description**:
Configuration options for the text element.  
The **`id`** property is required and must be unique.

See the Text UI element documentation for all available options:  
[Text Element Options](/api/ui-elements-api/text-element/)
---

### **`addImage(options)`**

Add an image element to the widget.Available only in UI scripts.  

###### **`options`**

* **Type**: `Object`
* **Description**:
Configuration options for the image element.  
The **`id`** property is required and must be unique.

See the Image UI element documentation for all available options:  
[Image Element Options](/api/ui-elements-api/image-element/)
---

### **`setElementProperties(id, props)`**

Update properties of an existing UI element. Available only in UI scripts.
---

###### **`id`**

* **Type**: `string`
* **Description**:
ID of the element to update (cannot be changed)
---

###### **`props`**

* **Type**: `Object`
* **Description**:
Properties to change of the element.
---

#### Example

<CodeBlock language="javascript">
  {`win.setElementProperties("myText", {
  x: 20,
  y: 20
});`}
</CodeBlock>
---
### **`removeElements(ids)`**

Remove one or more UI elements from the widget.Available only in UI scripts.

###### **`ids`**

* **Type**: `string | Array | null`
* **Description**:
- A single element ID
- An array of element IDs
- `null` or `undefined` to remove **all** elements from the widget


:::warning
Leaving the `ids` parameter empty or setting it to `null`/`undefined` will remove all elements from the widget.
:::

#### Example

<CodeBlock language="javascript">
  {`// Remove a single element
win.removeElements("myText");

// Remove multiple elements
win.removeElements(["img1", "img2", "text3"]);

// Clear all content
win.removeElements();`}
</CodeBlock>

### **`getElementProperty(id, propertyName)`**

Retrieve a specific property of a UI element. Available only in UI scripts.

###### **`id`**

* **Type**: `string`
* **Description**:
ID of the UI element.
---

###### **`propertyName`**

* **Type**: `string`
* **Description**:
The name of the property to retrieve (e.g., `"text"`, `"x"`, `"y"`, `"width"`, `"height"`).
---

#### Return Value

* **Type**: `any | null | undefined`
* **Description**:
The value of requested property. Returns `null` if the element is not found, or `undefined` if the property does not exist.

#### Example

<CodeBlock language="javascript">
  {`var textValue = win.getElementProperty("myText", "text");
if (textValue !== null) {
  console.log("Current text: " + textValue);
}

var xPos = win.getElementProperty("myText", "x");
console.log("X Position: " + xPos);`}
</CodeBlock>
---
## Widget Management Methods

:::note
The following methods are **only** accessible from the [Main script](/guides/script-types/#main-script-the-brain) on a [widgetWindow](/api/widget-api/widget-window/) object instance. They are
**unavailable** in [UI scripts](/guides/script-types/#ui-script-the-face).
:::

### **`setProperties(options)`**

Update widget properties after creation.
---

###### **`options`**

* **Type**: `Object`
* **Description**:
Widget properties to update.The **`id`** property cannot be changed.

See [Widget Options](/api/widget-api/widget-window/#options-object) for a list of available options.

#### Example (Main Script)

<CodeBlock language="javascript">
  {`var widget = new widgetWindow({ id: "my-widget" });

widget.setProperties({
x: 200,
y: 200
});`}
</CodeBlock>
---
### `getProperties()`

Get current widget properties. Available only in the main script.

#### Return Value

An object containing the current widget properties.

#### Example

<CodeBlock language="javascript">
  {`var props = widget.getProperties();
console.log("Widget position: " + props.x + ", " + props.y);`}
</CodeBlock>
---
### `close()`

Close and destroy the widget. Available only in the main script.

#### Example

<CodeBlock language="javascript">
  {`widget.close();`}
</CodeBlock>
---
### `refresh()`

Refresh the widget (reload scripts and redraw). Available only in the main script.

#### Example

<CodeBlock language="javascript">
  {`widget.refresh();`}
</CodeBlock>
---
### **`on(eventName, callback)`**

###### **`eventName`**

* **Type**: `string`
* **Description**:
Name of the lifecycle event.

Available values:
- `"refresh"` : Executes when the widget is refreshed (scripts reloaded)
- `"close"` : Executes **before** the window is destroyed
- `"closed"` : Executes **after** the window has been destroyed
- `"show"` : Executes when the widget becomes visible (via `show: true`)
- `"hide"` : Executes when the widget is hidden (via `show: false`)
---

###### **`callback`**

* **Type**: `function`
* **Description**:
Function executed when the specified event occurs.

#### Example

<CodeBlock language="javascript">
  {`widget.on("refresh", function () {
  console.log("Widget is refreshing!");
});

widget.on("close", function () {
  console.log("Cleaning up before close...");
});

widget.on("closed", function () {
  console.log("Window is now gone.");
});`}
</CodeBlock>
---

## Context Menu Methods

:::note
The following methods are **only** accessible in Main script.
:::

### **`setContextMenu(items)`**

Sets the entire custom context menu for the widget.This replaces any previously set custom menu items.Available only in Main script.
---

###### **`items`**

* **Type**: `Array`
* **Description**:
An array of context menu item objects.

Each menu item may contain:

- **`text`**
  * **Type**: `string`
  * **Description**:
  Text displayed for the menu item.

- **`action`**
  * **Type**: `function`
  * **Description**:
  Function executed when the item is clicked.

- **`type`**
  * **Type**: `string`
  * **Description**:
  Set to `"separator"` to render a line separator.

- **`checked`**
  * **Type**: `boolean`
  * **Description**:
  Displays a checkmark next to the item when set to `true`.

- **`items`**
  * **Type**: `Array`
  * **Description**:
  Array of sub-menu items, creating a nested context menu.


#### Example

<CodeBlock language="javascript">
  {`widget.setContextMenu([
  {
    text: "Toggle Submenu",
    items: [
      {
        text: "Option A",
        action: function () {
          console.log("A");
        }
      },
      {
        text: "Option B",
        checked: true,
        action: function () {
          console.log("B");
        }
      }
    ]
  },
  {
    type: "separator"
  },
  {
    text: "Refresh",
    action: function () {
      win.refresh();
    }
  }
]);`}
</CodeBlock>
---

### `clearContextMenu()`

Removes all custom items from the context menu. Available only in Main script.

#### Example

<CodeBlock language="javascript">
  {`widget.clearContextMenu();`}
</CodeBlock>
---

### **`disableContextMenu(disabled)`**

Completely disables the context menu for the widget.Available only in Main script.

###### **`disabled`**

* **Type**: `boolean`
* **Description**:
Set to `true` to disable the context menu. Set to `false` to enable it.
---

#### Example

<CodeBlock language="js">
  {`widget.disableContextMenu(true);`}
</CodeBlock>
---

### **`showDefaultContextMenuItems(show)`**

Controls the visibility of the default Novadesk context menu items (Refresh, Exit Widget, Close App).Available only in Main script.

###### **`show`**

* **Type**: `boolean`
* **Description**:
  Set to `true` to show default menu items.
  Set to `false` to hide them.
---

#### Example

<CodeBlock language="js">
  {`// Hide default items to use a fully custom context menu
widget.showDefaultContextMenuItems(false);`}
</CodeBlock>
---

## Inter-Process Communication (IPC)

The global **`ipc`** object allows data exchange between the **Main script** and the **UI script**.

### **`ipc.on(channel, callback)`**

Register a listener for a specific IPC channel.

###### **`channel`**

* **Type**: `string`
* **Description**:
Name of the channel to listen on.
---

###### **`callback`**

* **Type**: `function`
* **Description**:
Function executed when data is received on the channel.
---

### **`ipc.send(channel, data)`**

Send data to the other script context.

###### **`channel`**

* **Type**: `string`
* **Description**:
Name of the channel to send data on.
---

###### **`data`**

* **Type**: `any`
* **Description**:
Data to send to the receiving script.

#### Example

<Tabs>
  <TabItem value="index-js" label="index.js" default>
<CodeBlock language="javascript">
  {`ipc.on("get-message-from-widget", function() {
  console.log("Call received from widget");
  ipc.send("send-message-to-widget", "Hello from main script");
});`}
</CodeBlock>
  </TabItem>

  <TabItem value="welcome-js" label="welcome.js">
<CodeBlock language="javascript">
  {`ipc.send("get-message-from-widget");

ipc.on("send-message-to-widget", function(data) {
console.log("Message from main script: " + data);
});`}
</CodeBlock>
  </TabItem>
</Tabs>